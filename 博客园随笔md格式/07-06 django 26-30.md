# 26. Django里QuerySet的get和filter方法的区别？
**1) 输入参数**<br />
get 的参数只能是model中定义的那些字段，只支持严格匹配。<br />
filter的参数可以是字段，也可以是扩展的 where查询关键字，如 in，like 等。<br />
**2) 返回值**<br />
get返回值是一个定义的 model 对象。<br />
filter返回值是一个新的 QuerySet 对象，然后可以对 QuerySet 在进行查询返回新的 QuerySet 对象，支持链式操作，QuerySet 一个集合对象，可使用迭代或者遍历，切片等，但是不等于 list 类型(使用一定要注意)。<br />
**3) 异常**<br />
get只有一条记录返回的时候才正常，也就说明 get 的查询字段必须是主键或者唯一约束的字段。当返回多条记录或者是没有找到记录的时候都会抛出异常。 filter 有没有匹配的记录都可以
# 27. django 中当一个用户登录 A 应用服务器（进入登录状态），然后下次请求被 nginx 代理到 B 应用服务器会出现什么影响？
如果用户在A应用服务器登陆的session数据没有共享到B应用服务器，那么之前的登录状态就没有了。
**1.安装django-cors-headers，之后在settings.py中配置**
```python
pip install django-cors-headers
```
```python
INSTALLED_APPS = [
 ...
 'corsheaders'，
 ...
 ] 
 
MIDDLEWARE_CLASSES = (
 ...
 'corsheaders.middleware.CorsMiddleware',
 'django.middleware.common.CommonMiddleware', # 注意顺序
 ...
)
#跨域增加忽略
CORS_ALLOW_CREDENTIALS = True
CORS_ORIGIN_ALLOW_ALL = True
CORS_ORIGIN_WHITELIST = (
 '*'
)
 
CORS_ALLOW_METHODS = (
 'DELETE',
 'GET',
 'OPTIONS',
 'PATCH',
 'POST',
 'PUT',
 'VIEW',
)
 
CORS_ALLOW_HEADERS = (
 'XMLHttpRequest',
 'X_FILENAME',
 'accept-encoding',
 'authorization',
 'content-type',
 'dnt',
 'origin',
 'user-agent',
 'x-csrftoken',
 'x-requested-with',
 'Pragma',
)
```
**2.使用JSONP**<br />
使用Ajax获取json数据时，存在跨域的限制。不过，在Web页面上调用js的script脚本文件时却不受跨域的影响，JSONP就是利用这个来实现跨域的传输。因此，我们需要将Ajax调用中的dataType从JSON改为JSONP（相应的API也需要支持JSONP）格式。<br />
JSONP只能用于GET请求。<br />
**3.直接修改Django中的views.py文件**<br />
修改views.py中对应API的实现函数，允许其他域通过Ajax请求数据：
```python
def myview(_request):
    response = HttpResponse(json.dumps({“key”: “value”, “key2”: “value”}))
    response[“Access-Control-Allow-Origin”] = “*”
    response[“Access-Control-Allow-Methods”] = “POST, GET, OPTIONS”
    response[“Access-Control-Max-Age”] = “1000”
    response[“Access-Control-Allow-Headers”] = “*”
return response
```
# 28. Django对数据查询结果排序怎么做，降序怎么做，查询大于某个字段怎么做?

- 排序使用order_by()
- 降序需要在排序字段名前加-
- 查询字段大于某个值：使用filter(字段名_gt=值)<br />
更多骚操作:

```python
models.Tb1.objects.filter(id__lt=10, id__gt=1)   # 获取id大于1 且 小于10的值
 
models.Tb1.objects.filter(id__in=[11, 22, 33])   # 获取id等于11、22、33的数据
models.Tb1.objects.exclude(id__in=[11, 22, 33])  # not in
 
models.Tb1.objects.filter(name__contains="ven")  # 获取name字段包含"ven"的
models.Tb1.objects.filter(name__icontains="ven") # icontains大小写不敏感
 
models.Tb1.objects.filter(id__range=[1, 3])      # id范围是1到3的，等价于SQL的bettwen and
 
类似的还有：startswith，istartswith, endswith, iendswith　

date字段还可以：
models.Class.objects.filter(first_day__year=2017)
```
# 29. 生成迁移文件和执行迁移文件的命令是什么？
```python
python manage.py makemigrations 
python manage.py migrate 
```
# 30.uWSGI与uwsgi区别
uWSGI是一个 Web 服务器，它实现了WSGI 协议、uwsgi、http 等协议。注意 uwsgi 是一种通信协议，而 uWSGI 是实现 uwsgi 协议和 WSGI 协议的Web 服务器。uWSGI 具有超快的性能、低内存占用和多app 管理等优点，并且搭配着 Nginx就是一个生产环境了，能够将用户访问请求与应用 app 隔离开，实现真正的部署。相比来讲，支持的并发量更高，方便管理多进程，发挥多核的优势，提升性能。